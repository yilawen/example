<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>注册</title>
  <{include file="common_css.html"}>
  <style>
  BODY {
    text-decoration:none;
    font-family:"微软雅黑";
    margin:0;
    padding:0
  }
  .tip {
    font-size:30px;
    padding:0px
  }
  .logo-en img {
    width:30%;
    height:30%;
  }
  .spanb {
    float:left;
    height:50px;
    width:1px;
    border:1px solid red;
    margin-top:10px
  }
  #main {
    margin-top:30px
  }
  .required {
    color:red
  }
  .toLogin {
    padding:10px;
    float:right;
    font-size:10px
  }
  .toLogin a:hover {
    color:red;
  }
  .footer {
    width: 100%;
    height: 70px;
    position: relative;
    margin-top:30px;
  }
  .footer-content {
      width: 100%;
      position: absolute;
      bottom: 0;
    }
    input.error {
      border: 1px solid red;
    }
    label.error {
      padding-left: 12px;
      padding-bottom: 2px;
      font-weight: bold;
      font-size:12px;
      color: red;
    }
    </style>
  </head>
  <body>

    <div  class="container-fluid">
      <div id="header" class="row">
        <div class="col-md-8 col-md-offset-2">
          <div class="row">
            <div id="logo"  class="col-md-3"><a href="<{$root}>home/index"><img  class="img-responsive center-block" src="<{$root}>static/images/logo.png"></a>
            </div>
            <div class="spanb"></div>
            <div class="col-md-3 ">
              <div class="tip">
                欢迎注册
              </div>
              <div class="logo-en">
                <img  src="<{$root}>static/images/logo_text.png">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="main" class="container-fluid">
      <div class="row">
        <div class="col-md-8 col-md-offset-2">
          <form class="form-horizontal" id="registerForm">
            <div class="form-group">
              <label for="username" class="col-md-3 control-label"><span class="required">*</span>用户名：</label>
              <div class="col-md-6">
                <input type="text" class="form-control" id="username" name="username" placeholder="字母和数字组成" autocomplete="off">
              </div>
              <div class="col-md-3"></div>
            </div>
            <div class="form-group">
              <label for="password" class="col-md-3 control-label"><span class="required">*</span>密码：</label>
              <div class="col-md-6">
                <input type="password" class="form-control" id="password"  name="password" placeholder="6~16位" autocomplete="off">
              </div>
              <div class="col-md-3"></div>
            </div>

            <div class="form-group">
              <label for="AckPassword" class="col-md-3 control-label"><span class="required">*</span>确认密码：</label>
              <div class="col-md-6">
                <input type="password" class="form-control" id="AckPassword" name="AckPassword" placeholder="密码请保持一致" autocomplete="off">
              </div>
              <div class="col-md-3"></div>
            </div>

            <div class="form-group">
              <label for="telephone" class="col-md-3 control-label">手机：</label>
              <div class="col-md-6">
                <input type="text" class="form-control" id="telephone" name="telephone" placeholder="" autocomplete="off">
              </div>
              <div class="col-md-3"></div>
            </div>

            <div class="form-group">
              <label for="address" class="col-md-3 control-label">地址：</label>
              <div class="col-md-6">
                <input type="text" class="form-control" id="address" name="address"  placeholder="" autocomplete="off">
              </div>
              <div class="col-md-3"></div>
            </div>

            <div class="form-group">
              <div class="col-md-6 col-md-offset-3">
                <input type="submit" value="注册" class="btn btn-primary btn-block" />
              </div>
            </div>
          </form>
          <div class="row">
            <div class="col-md-3 col-md-offset-6 text-right">
              <a href="<{$root}>user/showLogin" style="color:red">已有账号？点击登录></a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <{include file="footer.html"}>
    <{include file="common_js.html"}>
    <script type="text/javascript" src="<{$root}>static/js/jquery.validate.js"></script>
    <script type="text/javascript" src="<{$root}>static/js/messages_zh.js"></script>
    <script>
    var root = getRootPath();
    $(function(){
      $("#registerForm").validate({
        rules:{
          username : {
            required : true,
            minlength: 6
          },
          password : {
            required : true,
            minlength : 6
          },
          AckPassword : {
            required : true,
            minlength : 6,
            equalTo : "#password"
          },
          telephone : {
            digits : true,
            maxlength : 13
          }
        },
        messages: {
          username : {
            require : "请输入用户名",
          },
          password: {
            required: "请输入密码",
            minlength: "密码不能小于6个字 符"
          },
          AckPassword: {
            required: "请输入确认密码",
            minlength: "确认密码不能小于6个字符",
            equalTo: "两次输入密码不一致"
          },
        },
        errorPlacement:function(error,element) {
          error.appendTo(element.parent("div").next("div"));
        },
        submitHandler: function(form)
        {
          $.ajax({
            url : root + "/user/register",
            data : {
              username : $("#username").val(),
              password : $("#password").val(),
              telephone : $("#telephone").val(),
              address : $("#address").val()
            },
            type : "post",
            dataType : "html",
            success : function(data) {
              if(data) {
                alert("注册成功");
                window.setTimeout(location = root + '/user/showLogin',5000);
              }
              else {
                alert("该用户名已被使用！")
              }
            },
            error : function(){
              alert("异常");
            }
          });
        }
      });
     })
</script>
</body>
</html>