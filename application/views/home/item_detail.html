<!DOCTYPE html>
<html>
<head>
  <{include file="common_css.html"}>
  <meta charset="UTF-8">
  <title>商品详情</title>
  <style>
  .item-img img {
    height:300px;
    width:100%
  }
  .main {
    margin-top:30px
  }
  .item-name {
    margin-top:30px;
    height:28px;
    border-bottom:1px solid #ccc;
    font-size:12px;
    color:black
  }
  .item-information {
    height:28px;
    font-size:12px;
    padding-bottom:5px;
    color:black
  }
  .item-price {
    height:40px;
    font-size:32px ;
    margin-top:10px;
    color:red;
    margin-bottom:10px
  }
  .item-inventory {
    font-size:16px;
    margin-top:15px
  }
  </style>
</head>
<body >
  <div class="container-fluid">
    <{include file="header.html"}>
    <!-- main -->
    <div class="row main">
      <div class="col-md-4 col-md-offset-2 item-img">
        <img alt="" src="<{$item->itemimg}>" class="img-responsive">
      </div>
      <div class="col-md-4">
        <div class="panel panel-primary">
          <div class="panel-heading"><b><{$item->itemname}></b></div>
          <div class="panel-body">
            <div class="item-information"><{$item->information}></div>
            <div>品牌：<{$item->brand}></div>
            <div>价格：<price class="item-price"><{$item->itemprice}></price>&nbsp/500g	</div>
            <div class="item-inventory">库存：<{$item->inventory}></div>
          </div>
          <div class="panel-footer clearfix">
            <div class="col-md-5" style="margin-left:-15px">
              <p style="float:left; line-height:35px">数量：</p>
              <div class="input-group">
                <input id="quantity" type="text" class="form-control" value="1">
                <span class="input-group-btn">
                  <div class="btn-group-vertical btn-group btn-group-xs" role="group">
                   <button id="add" class="btn btn-default" type="button"  style="height:17px; font-size:8px">+</button>
                   <button id="cut" class="btn btn-default" type="button" style="height:18px; font-size:8px">-</button>
                 </div>
               </span>
             </div>
           </div>
           <div class="col-md-4 col-md-offset-3"><button  id="addToCar" class="btn btn-primary"  data-toggle="modal" data-target="#myModal" itemid="<{$item->itemid}>">加入购物车</button></div>
         </div>
       </div>
     </div>
     <!-- Modal -->
     <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">提示</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">继续购物</button>
            <a href="<{$root}>home/shopcar" target="_blank"><button type="button" class="btn btn-primary">去结算></button></a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <{include file="footer.html"}>
  </div>
  <{include file="common_js.html"}>
  <script>
    $(function(){
      var root = getRootPath();
      var quantity = $("#quantity");

      $("#add").click(function(){
        if(quantity.val() == ""){
          quantity.val("1");
        } else {
          $total =parseInt(quantity.val());
          quantity.val($total+1);
        }
      });

      $("#cut").click(function(){
        if(quantity.val() == "1" || quantity.val() == "")
        {
          quantity.val("1");
        } else{
          $total = parseInt(quantity.val());
          quantity.val($total-1);
        }
      });

      $("#addToCar").click(function(){
        $.ajax({
          url : root + "/home/addToCar",
          data : {
            itemid : $("#addToCar").attr('itemid'),
            quantity : quantity.val()
          },
          type : "post",
          dataType : "html",
          success : function(){
            $(".modal-body").html("成功加入购物车！");
          },
          error : function(){
            alert("异常");
          }
        });
      });

      $(this).ajaxStart(function(){
        $(".modal-body").html("请稍后...");
      });
    })
  </script>
</body>
</html>